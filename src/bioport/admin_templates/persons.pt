<html metal:use-macro="context/@@admin_template/macros/master">
<div metal:fill-slot="content" 
tal:define="persons view/get_persons">
		<h1>Persons</h1>
<span tal:repeat="letter string:abcdefghijklmnopqrstuvwxyz"
    tal:attributes="class python:letter == request.get('beginletter') and 'alfabet selected' or 'alfabet'"
    ><a tal:attributes="href string:${view/url}?beginletter=${letter}" ><span tal:replace="letter/upper" /></a></span>
<p>
<form tal:attributes="action view/url">
	<span tal:repeat="source python:context.repository().get_sources()"
		tal:condition="nothing"
	    tal:attributes="class python:source.id == request.get('source_id') and 'alfabet selected' or 'alfabet'"
	>
	    <a tal:attributes="href string:${view/url}?source_id=${source/id}" ><span tal:replace="source/id" /></a></span>
	    <span class="alfabet" tal:condition="nothing">
	    <a tal:attributes="href string:${view/url}?beginletter=%" >alle namen</a></span>
naam: <input type="text" name="search_term" tal:attributes="value request/search_term | nothing" />
<br>	
status : <select>
	<option>nog te maken</option>
	<option>..</option>
	</select>
<br>	
levensjaren niet ingevuld <input type="checkbox" />
<br>	
	<input type="submit" value=" zoek " />
	<br>
</form>
<ul>
<li tal:condition="request/auteur_id | nothing">U zocht naar biografie&euml;n met <em tal:content="structure python:context.repository().get_author(request.form['auteur_id']).name"></em> als auteur.</li>
<li tal:condition="request/beroep_id | nothing">U zocht naar biografie&euml;n met <em tal:content="structure python:here.get_beroep(request.beroep_id).naam"></em> als beroep.</li>
</ul>
<div tal:omit-tag="" tal:define="results persons">
	<div tal:omit-tag="" metal:define-macro="aantal_resultaten">
		<p tal:condition="python:results.grand_total == 0">Er zijn geen resultaten gevonden.</p>
		<p tal:condition="python:results.grand_total == 1">Er is 1 resultaat gevonden.</p>
		<p tal:condition="python:results.grand_total > 2">Er zijn <span tal:replace="python:results.grand_total" /> resultaten gevonden.</p>
	</div>
</div>


<div class="batch_navigation">	
	<span tal:replace="python:'%s-%s van %s' % (persons.start + 1, persons.end + 1,  persons.grand_total)" />  | 
	<span tal:condition="persons/previous">
		<a tal:attributes="href python:view.batch_url(start=persons.previous.start)"
			tal:content="string:vorige ${persons/previous/size}">vorige X</a>
	</span>  | 

	<span tal:condition="persons/next">
		<a tal:attributes="href python:view.batch_url(start=persons.next.start);"
			tal:content="string:volgende ${persons/next/size}">vorige X</a>
	</span>
</div>


<table>
<tr>
    <th style="width:50%">Naam</th>
    <th></th>
    <th tal:condition="nothing">laatst bewerkt</th>
    <th tal:condition="nothing">verant- woordelijk</th>
    <th tal:condition="nothing">status</th>
</tr>
<tr tal:repeat="person python:persons">
	<td >
		<a 
	tal:content="structure python:person.naam() and person.naam().guess_normal_form() or 'XXXXX'" 
    tal:attributes="href python:view.url(context.__parent__, 'persoon', data={'bioport_id':person.get_bioport_id()})" />
    
    <span tal:replace="python:context.format_dates(person.get_value('geboortedatum'), person.get_value('sterfdatum'))" />
	</td>
	<td tal:condition="person/get_bioport_id">
	    <a tal:attributes="href python:view.url(context,'persoon', data={'bioport_id':person.get_bioport_id()})">
	    	bewerk gegevens
	     </a>
	</td>
	<td tal:condition="not:person/get_bioport_id">
	    [<a tal:attributes="href python:view.url('biography_identify')"  x="{'source_id':bio.get_source().id,'bio_id':person.id})" >identify</a>]
	</td>
	<td tal:condition="nothing">
	TODO
	<span tal:replace="person/last_commit" />
		door <em class="todo">jelle</em>
		</td>
	<td tal:condition="nothing" class="todo">jelle</td>
	<td tal:condition="nothing">XXX</td>
	<td tal:condition="nothing">XXX (nog te doen, af, nog checken, ...)</td>
</tr>
<ul>
</div>
</html>
